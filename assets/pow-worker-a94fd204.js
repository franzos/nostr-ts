(function(){"use strict";var _={};Object.defineProperty(_,"__esModule",{value:!0}),_.bech32m=_.bech32=void 0;const j="qpzry9x8gf2tvdw0s3jn54khce6mua7l",F={};for(let e=0;e<j.length;e++){const r=j.charAt(e);F[r]=e}function L(e){const r=e>>25;return(e&33554431)<<5^-(r>>0&1)&996825010^-(r>>1&1)&642813549^-(r>>2&1)&513874426^-(r>>3&1)&1027748829^-(r>>4&1)&705979059}function V(e){let r=1;for(let i=0;i<e.length;++i){const s=e.charCodeAt(i);if(s<33||s>126)return"Invalid prefix ("+e+")";r=L(r)^s>>5}r=L(r);for(let i=0;i<e.length;++i){const s=e.charCodeAt(i);r=L(r)^s&31}return r}function W(e,r,i,s){let f=0,l=0;const c=(1<<i)-1,d=[];for(let w=0;w<e.length;++w)for(f=f<<r|e[w],l+=r;l>=i;)l-=i,d.push(f>>l&c);if(s)l>0&&d.push(f<<i-l&c);else{if(l>=r)return"Excess padding";if(f<<i-l&c)return"Non-zero padding"}return d}function te(e){return W(e,8,5,!0)}function oe(e){const r=W(e,5,8,!1);if(Array.isArray(r))return r}function ie(e){const r=W(e,5,8,!1);if(Array.isArray(r))return r;throw new Error(r)}function z(e){let r;e==="bech32"?r=1:r=734539939;function i(c,d,w){if(w=w||90,c.length+7+d.length>w)throw new TypeError("Exceeds length limit");c=c.toLowerCase();let p=V(c);if(typeof p=="string")throw new Error(p);let E=c+"1";for(let g=0;g<d.length;++g){const x=d[g];if(x>>5)throw new Error("Non 5-bit word");p=L(p)^x,E+=j.charAt(x)}for(let g=0;g<6;++g)p=L(p);p^=r;for(let g=0;g<6;++g){const x=p>>(5-g)*5&31;E+=j.charAt(x)}return E}function s(c,d){if(d=d||90,c.length<8)return c+" too short";if(c.length>d)return"Exceeds length limit";const w=c.toLowerCase(),p=c.toUpperCase();if(c!==w&&c!==p)return"Mixed-case string "+c;c=w;const E=c.lastIndexOf("1");if(E===-1)return"No separator character for "+c;if(E===0)return"Missing prefix for "+c;const g=c.slice(0,E),x=c.slice(E+1);if(x.length<6)return"Data too short";let A=V(g);if(typeof A=="string")return A;const S=[];for(let U=0;U<x.length;++U){const N=x.charAt(U),O=F[N];if(O===void 0)return"Unknown character "+N;A=L(A)^O,!(U+6>=x.length)&&S.push(O)}return A!==r?"Invalid checksum for "+c:{prefix:g,words:S}}function f(c,d){const w=s(c,d);if(typeof w=="object")return w}function l(c,d){const w=s(c,d);if(typeof w=="object")return w;throw new Error(w)}return{decodeUnsafe:f,decode:l,encode:i,toWords:te,fromWordsUnsafe:oe,fromWords:ie}}_.bech32=z("bech32"),_.bech32m=z("bech32m");var se={};(function(e){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64url=e.base64=e.base32crockford=e.base32hex=e.base32=e.base16=e.utils=e.assertNumber=void 0;function r(n){if(!Number.isSafeInteger(n))throw new Error(`Wrong integer: ${n}`)}e.assertNumber=r;function i(...n){const t=(a,h)=>b=>a(h(b)),o=Array.from(n).reverse().reduce((a,h)=>a?t(a,h.encode):h.encode,void 0),u=n.reduce((a,h)=>a?t(a,h.decode):h.decode,void 0);return{encode:o,decode:u}}function s(n){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(o=>{if(r(o),o<0||o>=n.length)throw new Error(`Digit index outside alphabet: ${o} (alphabet: ${n.length})`);return n[o]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(o=>{if(typeof o!="string")throw new Error(`alphabet.decode: not string element=${o}`);const u=n.indexOf(o);if(u===-1)throw new Error(`Unknown letter: "${o}". Allowed: ${n}`);return u})}}}function f(n=""){if(typeof n!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let o of t)if(typeof o!="string")throw new Error(`join.encode: non-string input=${o}`);return t.join(n)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(n)}}}function l(n,t="="){if(r(n),typeof t!="string")throw new Error("padding chr should be string");return{encode(o){if(!Array.isArray(o)||o.length&&typeof o[0]!="string")throw new Error("padding.encode input should be array of strings");for(let u of o)if(typeof u!="string")throw new Error(`padding.encode: non-string input=${u}`);for(;o.length*n%8;)o.push(t);return o},decode(o){if(!Array.isArray(o)||o.length&&typeof o[0]!="string")throw new Error("padding.encode input should be array of strings");for(let a of o)if(typeof a!="string")throw new Error(`padding.decode: non-string input=${a}`);let u=o.length;if(u*n%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;u>0&&o[u-1]===t;u--)if(!((u-1)*n%8))throw new Error("Invalid padding: string has too much padding");return o.slice(0,u)}}}function c(n){if(typeof n!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>n(t)}}function d(n,t,o){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(o<2)throw new Error(`convertRadix: wrong to=${o}, base cannot be less than 2`);if(!Array.isArray(n))throw new Error("convertRadix: data should be array");if(!n.length)return[];let u=0;const a=[],h=Array.from(n);for(h.forEach(b=>{if(r(b),b<0||b>=t)throw new Error(`Wrong integer: ${b}`)});;){let b=0,v=!0;for(let m=u;m<h.length;m++){const R=h[m],y=t*b+R;if(!Number.isSafeInteger(y)||t*b/t!==b||y-R!==t*b)throw new Error("convertRadix: carry overflow");if(b=y%o,h[m]=Math.floor(y/o),!Number.isSafeInteger(h[m])||h[m]*o+b!==y)throw new Error("convertRadix: carry overflow");if(v)h[m]?v=!1:u=m;else continue}if(a.push(b),v)break}for(let b=0;b<n.length-1&&n[b]===0;b++)a.push(0);return a.reverse()}const w=(n,t)=>t?w(t,n%t):n,p=(n,t)=>n+(t-w(n,t));function E(n,t,o,u){if(!Array.isArray(n))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(o<=0||o>32)throw new Error(`convertRadix2: wrong to=${o}`);if(p(t,o)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${o} carryBits=${p(t,o)}`);let a=0,h=0;const b=2**o-1,v=[];for(const m of n){if(r(m),m>=2**t)throw new Error(`convertRadix2: invalid data word=${m} from=${t}`);if(a=a<<t|m,h+t>32)throw new Error(`convertRadix2: carry overflow pos=${h} from=${t}`);for(h+=t;h>=o;h-=o)v.push((a>>h-o&b)>>>0);a&=2**h-1}if(a=a<<o-h&b,!u&&h>=t)throw new Error("Excess padding");if(!u&&a)throw new Error(`Non-zero padding: ${a}`);return u&&h>0&&v.push(a>>>0),v}function g(n){return r(n),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return d(Array.from(t),2**8,n)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(d(t,n,2**8))}}}function x(n,t=!1){if(r(n),n<=0||n>32)throw new Error("radix2: bits should be in (0..32]");if(p(8,n)>32||p(n,8)>32)throw new Error("radix2: carry overflow");return{encode:o=>{if(!(o instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return E(Array.from(o),8,n,!t)},decode:o=>{if(!Array.isArray(o)||o.length&&typeof o[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(E(o,n,8,t))}}}function A(n){if(typeof n!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return n.apply(null,t)}catch{}}}function S(n,t){if(r(n),typeof t!="function")throw new Error("checksum fn should be function");return{encode(o){if(!(o instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const u=t(o).slice(0,n),a=new Uint8Array(o.length+n);return a.set(o),a.set(u,o.length),a},decode(o){if(!(o instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const u=o.slice(0,-n),a=t(u).slice(0,n),h=o.slice(-n);for(let b=0;b<n;b++)if(a[b]!==h[b])throw new Error("Invalid checksum");return u}}}e.utils={alphabet:s,chain:i,checksum:S,radix:g,radix2:x,join:f,padding:l},e.base16=i(x(4),s("0123456789ABCDEF"),f("")),e.base32=i(x(5),s("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),l(5),f("")),e.base32hex=i(x(5),s("0123456789ABCDEFGHIJKLMNOPQRSTUV"),l(5),f("")),e.base32crockford=i(x(5),s("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),f(""),c(n=>n.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=i(x(6),s("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),l(6),f("")),e.base64url=i(x(6),s("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),l(6),f(""));const U=n=>i(g(58),s(n),f(""));e.base58=U("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=U("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=U("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const N=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(n){let t="";for(let o=0;o<n.length;o+=8){const u=n.subarray(o,o+8);t+=e.base58.encode(u).padStart(N[u.length],"1")}return t},decode(n){let t=[];for(let o=0;o<n.length;o+=11){const u=n.slice(o,o+11),a=N.indexOf(u.length),h=e.base58.decode(u);for(let b=0;b<h.length-a;b++)if(h[b]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(h.slice(h.length-a)))}return Uint8Array.from(t)}};const O=n=>i(S(4,t=>n(n(t))),e.base58);e.base58check=O;const G=i(s("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),f("")),Q=[996825010,642813549,513874426,1027748829,705979059];function D(n){const t=n>>25;let o=(n&33554431)<<5;for(let u=0;u<Q.length;u++)(t>>u&1)===1&&(o^=Q[u]);return o}function X(n,t,o=1){const u=n.length;let a=1;for(let h=0;h<u;h++){const b=n.charCodeAt(h);if(b<33||b>126)throw new Error(`Invalid prefix (${n})`);a=D(a)^b>>5}a=D(a);for(let h=0;h<u;h++)a=D(a)^n.charCodeAt(h)&31;for(let h of t)a=D(a)^h;for(let h=0;h<6;h++)a=D(a);return a^=o,G.encode(E([a%2**30],30,5,!1))}function Y(n){const t=n==="bech32"?1:734539939,o=x(5),u=o.decode,a=o.encode,h=A(u);function b(y,k,C=90){if(typeof y!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof y}`);if(!Array.isArray(k)||k.length&&typeof k[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof k}`);const I=y.length+7+k.length;if(C!==!1&&I>C)throw new TypeError(`Length ${I} exceeds limit ${C}`);return y=y.toLowerCase(),`${y}1${G.encode(k)}${X(y,k,t)}`}function v(y,k=90){if(typeof y!="string")throw new Error(`bech32.decode input should be string, not ${typeof y}`);if(y.length<8||k!==!1&&y.length>k)throw new TypeError(`Wrong string length: ${y.length} (${y}). Expected (8..${k})`);const C=y.toLowerCase();if(y!==C&&y!==y.toUpperCase())throw new Error("String must be lowercase or uppercase");y=C;const I=y.lastIndexOf("1");if(I===0||I===-1)throw new Error('Letter "1" must be present between prefix and data only');const ee=y.slice(0,I),M=y.slice(I+1);if(M.length<6)throw new Error("Data must be at least 6 characters long");const re=G.decode(M).slice(0,-6),ne=X(ee,re,t);if(!M.endsWith(ne))throw new Error(`Invalid checksum in ${y}: expected "${ne}"`);return{prefix:ee,words:re}}const m=A(v);function R(y){const{prefix:k,words:C}=v(y,!1);return{prefix:k,words:C,bytes:u(C)}}return{encode:b,decode:v,decodeToBytes:R,decodeUnsafe:m,fromWords:u,fromWordsUnsafe:h,toWords:a}}e.bech32=Y("bech32"),e.bech32m=Y("bech32m"),e.utf8={encode:n=>new TextDecoder().decode(n),decode:n=>new TextEncoder().encode(n)},e.hex=i(x(4),s("0123456789abcdef"),f(""),c(n=>{if(typeof n!="string"||n.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof n} with length ${n.length}`);return n.toLowerCase()}));const H={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},q=`Invalid encoding type. Available types: ${Object.keys(H).join(", ")}`,Be=(n,t)=>{if(typeof n!="string"||!H.hasOwnProperty(n))throw new TypeError(q);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return H[n].encode(t)};e.bytesToString=Be,e.str=e.bytesToString;const Te=(n,t)=>{if(!H.hasOwnProperty(n))throw new TypeError(q);if(typeof t!="string")throw new TypeError("stringToBytes() expects string");return H[n].decode(t)};e.stringToBytes=Te,e.bytes=e.stringToBytes})(se),BigInt(1e3),BigInt(1e6),BigInt(1e9),BigInt(1e12),BigInt("2100000000000000000"),BigInt(1e11);const K={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27};for(let e=0,r=Object.keys(K);e<r.length;e++)r[e],K[r[e]].toString();function ce(e,...r){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function Z(e,r=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(r&&e.finished)throw new Error("Hash#digest() has already been called")}function fe(e,r){ce(e);const i=r.outputLen;if(e.length<i)throw new Error(`digestInto() expects output buffer of length at least ${i}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ae=e=>e instanceof Uint8Array,P=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),$=(e,r)=>e<<32-r|e>>>r;if(!(new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68))throw new Error("Non little-endian hardware is not supported");function he(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function J(e){if(typeof e=="string"&&(e=he(e)),!ae(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}class de{clone(){return this._cloneInto()}}function ue(e){const r=s=>e().update(J(s)).digest(),i=e();return r.outputLen=i.outputLen,r.blockLen=i.blockLen,r.create=()=>e(),r}function le(e,r,i,s){if(typeof e.setBigUint64=="function")return e.setBigUint64(r,i,s);const f=BigInt(32),l=BigInt(4294967295),c=Number(i>>f&l),d=Number(i&l),w=s?4:0,p=s?0:4;e.setUint32(r+w,c,s),e.setUint32(r+p,d,s)}class we extends de{constructor(r,i,s,f){super(),this.blockLen=r,this.outputLen=i,this.padOffset=s,this.isLE=f,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=P(this.buffer)}update(r){Z(this);const{view:i,buffer:s,blockLen:f}=this;r=J(r);const l=r.length;for(let c=0;c<l;){const d=Math.min(f-this.pos,l-c);if(d===f){const w=P(r);for(;f<=l-c;c+=f)this.process(w,c);continue}s.set(r.subarray(c,c+d),this.pos),this.pos+=d,c+=d,this.pos===f&&(this.process(i,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Z(this),fe(r,this),this.finished=!0;const{buffer:i,view:s,blockLen:f,isLE:l}=this;let{pos:c}=this;i[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>f-c&&(this.process(s,0),c=0);for(let g=c;g<f;g++)i[g]=0;le(s,f-8,BigInt(this.length*8),l),this.process(s,0);const d=P(r),w=this.outputLen;if(w%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=w/4,E=this.get();if(p>E.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<p;g++)d.setUint32(4*g,E[g],l)}digest(){const{buffer:r,outputLen:i}=this;this.digestInto(r);const s=r.slice(0,i);return this.destroy(),s}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:i,buffer:s,length:f,finished:l,destroyed:c,pos:d}=this;return r.length=f,r.pos=d,r.finished=l,r.destroyed=c,f%i&&r.buffer.set(s),r}}const ge=(e,r,i)=>e&r^~e&i,be=(e,r,i)=>e&r^e&i^r&i,ye=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),B=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),T=new Uint32Array(64);class pe extends we{constructor(){super(64,32,8,!1),this.A=B[0]|0,this.B=B[1]|0,this.C=B[2]|0,this.D=B[3]|0,this.E=B[4]|0,this.F=B[5]|0,this.G=B[6]|0,this.H=B[7]|0}get(){const{A:r,B:i,C:s,D:f,E:l,F:c,G:d,H:w}=this;return[r,i,s,f,l,c,d,w]}set(r,i,s,f,l,c,d,w){this.A=r|0,this.B=i|0,this.C=s|0,this.D=f|0,this.E=l|0,this.F=c|0,this.G=d|0,this.H=w|0}process(r,i){for(let g=0;g<16;g++,i+=4)T[g]=r.getUint32(i,!1);for(let g=16;g<64;g++){const x=T[g-15],A=T[g-2],S=$(x,7)^$(x,18)^x>>>3,U=$(A,17)^$(A,19)^A>>>10;T[g]=U+T[g-7]+S+T[g-16]|0}let{A:s,B:f,C:l,D:c,E:d,F:w,G:p,H:E}=this;for(let g=0;g<64;g++){const x=$(d,6)^$(d,11)^$(d,25),A=E+x+ge(d,w,p)+ye[g]+T[g]|0,U=($(s,2)^$(s,13)^$(s,22))+be(s,f,l)|0;E=p,p=w,w=d,d=c+A|0,c=l,l=f,f=s,s=A+U|0}s=s+this.A|0,f=f+this.B|0,l=l+this.C|0,c=c+this.D|0,d=d+this.E|0,w=w+this.F|0,p=p+this.G|0,E=E+this.H|0,this.set(s,f,l,c,d,w,p,E)}roundClean(){T.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const xe=ue(()=>new pe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0),BigInt(1),BigInt(2);const Ee=e=>e instanceof Uint8Array,Ae=Array.from({length:256},(e,r)=>r.toString(16).padStart(2,"0"));function me(e){if(!Ee(e))throw new Error("Uint8Array expected");let r="";for(let i=0;i<e.length;i++)r+=Ae[e[i]];return r}var ke=[{name:"www.youtube.com"},{name:"music.youtube.com"},{name:"youtu.be",rewrite:e=>`https://www.youtube.com/watch?v=${e.split("/").pop()}`},{name:"twitch.tv"},{name:"vimeo.com"},{name:"rumble.com"}];ke.map(e=>e.name.replace(/\./g,"\\.")).join("|");var Ue=new TextEncoder;new TextDecoder("utf-8");function ve(e){const r=xe(Ue.encode(e));return me(r)}function $e(e){let r=0;for(let i=0;i<e.length;i++){const s=parseInt(e[i],16);if(s===0)r+=4;else{r+=Math.clz32(s)-28;break}}return r}function Ce(e,r,i){let s=0;const f=r.toString();for(;;){const l=e.tags.findIndex(w=>w[0]==="nonce");l!==-1?e.tags[l][1]=s.toString():e.tags.push(["nonce",s.toString(),f]);const c=JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content]);if(e.id=ve(c),$e(e.id)>=r)return e.tags=e.tags.filter(w=>w[0]!=="nonce"),e.tags.push(["nonce",s.toString(),f]),e;if(i&&s>=i)return;s++}}self.onmessage=function(e){const r=e.data,i=Ce(r.event,r.bits);self.postMessage({result:i})}})();
